from unittest.mock import Mock, patch

from avnwx import WindTemp, Region, Level, ForecastCycle

DATA = """(Extracted from FBUS33 KWNO 151957)
FD3US3
DATA BASED ON 151800Z
VALID 160600Z   FOR USE 0300-1200Z. TEMPS NEG ABV 24000

FT  3000    6000    9000   12000   18000   24000  30000  34000  39000
BDL 2807 2338-08 2447-11 2465-13 2578-25 2495-37 740853 751958 752556
BGR 2107 2317-14 2536-14 2553-16 2575-27 2586-40 751653 761158 259955
CAR 2517 2416-18 2427-20 2548-23 2580-31 2688-40 750554 760356 258655
PWM 2512 2424-12 2538-12 2549-16 2466-26 2589-38 752054 751457 760855
EMI 1914 2350-03 2457-07 2462-11 2586-22 7503-34 751749 753157 752958
ACK 2710 2343-04 2352-08 2465-13 2464-23 2581-36 760551 751454 751757
BOS 2606 2440-08 2348-11 2464-14 2577-25 2594-37 751054 751657 751854
BML 2509 2317-15 2536-14 2552-17 2571-28 2479-41 751553 751158 750556
ACY 2025 2348-03 2465-08 2460-11 2573-22 2691-34 761449 753056 752359
ALB 2206 2323-11 2431-12 2446-16 2466-27 2490-38 741153 752058 752156
BUF 2414 2218-16 2331-15 2337-20 2365-28 2476-42 740654 751257 751556
JFK 2310 2233-07 2451-09 2462-12 2468-23 2486-36 751251 763057 752757
PLB 2413 2419-17 2534-17 2452-19 2660-30 2482-41 740554 740859 750956
SYR 2312 2317-16 2332-13 2339-18 2359-28 2479-40 740554 751157 751556
CLE 2608 2218-17 2227-16 2241-19 2465-28 7510-39 753053 752556 752756
CMH 2707 2317-14 2341-14 2553-15 2589-25 7418-36 753651 753256 753457
CVG 2907 2315-15 2441-12 2456-13 2492-25 7416-35 753850 753756 753756
AGC 2405 2224-12 2353-12 2467-14 2588-24 7515-36 752951 753457 753458
AVP 2407 2232-10 2346-12 2362-13 2476-25 2499-38 752452 752657 752556
PSB      2329-12 2349-12 2467-13 2477-25 7509-37 752851 753057 752858
ORF 2131 2339+02 2454-02 2556-07 2571-19 2692-30 761445 752954 752761
RIC 2123 2245+01 2451-03 2561-08 2573-19 2590-31 760946 752655 763061
ROA 2117 2242-02 2451-04 2461-08 2479-20 7503-30 751846 752156 753161
CRW 9900 2338-06 2460-08 2469-12 2488-21 7406-33 752647 753156 753560
EKN      2339-06 2452-08 2474-11 2590-22 7406-34 752548 753757 753559
"""

@patch('avnwx.api.windtemp.WindTemp.get')
def test_windtemp_mock_get(mock_get):
    mock_get.return_value = DATA

    assert WindTemp.get() == DATA

    wt = WindTemp().region(Region.BOS).level(Level.LOW).fcst(ForecastCycle.SIX).fetch()

    assert wt == DATA

